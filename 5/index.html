<!DOCTYPE html>
<html lang="en">

<head>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CS 280A - Project 3: Face Morphing and Modelling a Photo Collection | Alonso Martinez</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }

        .comparison-container {
            position: relative;
            overflow: hidden;
            cursor: ew-resize;
            margin: 40px auto;
            border: 2px solid #ddd;
        }

        .comparison-container img {
            position: absolute;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Mask for the left (A) image */
        .comparison-container .img-top {
            clip: rect(0, 300px, 400px, 0);
            /* Initial divider in the middle */
        }

        /* Semi-transparent background areas */
        .comparison-container .left-half,
        .comparison-container .right-half {
            position: absolute;
            top: 0;
            width: 50%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            pointer-events: none;
            transition: opacity 0.5s ease;
        }

        .comparison-container .left-half {
            left: 0;
            background-color: rgba(149, 149, 149, 0.7);
            /* 50% opacity */
        }

        .comparison-container .right-half {
            right: 0;
            background-color: rgba(97, 97, 97, 0.424);
            /* 20% opacity */
        }

        /* Text styling for A and B labels */
        .comparison-container .label {
            color: white;
            font-size: 24px;
            font-weight: bold;
        }

        /* The vertical divider */
        .divider {
            position: absolute;
            top: 0;
            left: 50%;
            width: 3px;
            height: 100%;
            background-color: #ffffff00;
            cursor: ew-resize;
            transform: translateX(-50%);
            transition: background-color 0.5s ease;
        }

        /* On hover, hide the background areas with a smooth transition */
        .comparison-container:hover .left-half,
        .comparison-container:hover .right-half {
            opacity: 0;
        }

        /* On hover, the divider becomes more vibrant with smooth transition */
        .comparison-container:hover .divider {
            background-color: rgba(255, 255, 255, 0.347);
        }

        h1 {
            margin-top: 10px;
            margin-bottom: 10px;
        }

        h2 {
            color: #2c3e50;
            margin-top: 10px;
            margin-bottom: 20px;
        }

        h3 {
            margin-left: 40px;
            margin-top: 10px;
            margin-bottom: 10px;
            font-size: 21px;
        }

        ul.indented {
            margin-left: 20px;
        }

        p {
            margin-left: 20px;
        }

        p.indented {
            margin-left: 60px;
            /* Match or adjust the indent to be in line with your needs */
        }

        p.indented2,
        ol.indented2 {
            margin-left: 120px;
            /* Match or adjust the indent to be in line with your needs */
        }

        .highlight {
            font-weight: bold;
            color: rgb(70, 101, 138);
        }

        img {
            display: inline-block;
            /* Ensures the image itself is treated as a block element for centering */
            height: auto;
            max-width: 100%;
            /* Responsive behavior */
        }

        .pixelated {
            display: inline-block;
            /* Ensures the image itself is treated as a block element for centering */
            height: auto;
            max-width: 100%;
            image-rendering: pixelated;
            /* Ensures no interpolation for pixelated scaling */
            image-rendering: -moz-crisp-edges;
            /* Firefox */
            image-rendering: crisp-edges;
            /* Other browsers */
        }

        .displacement-matrix {
            text-align: center;
        }

        .image-wrapper {
            display: flex;
            justify-content: center;
            /* Center the image block horizontally */
            margin-bottom: 40px;
        }

        /* Modifier for different indentation */
        .image-wrapper.indent-level-1 {
            margin-left: 60px;
            margin-bottom: 0px;
        }

        .image-wrapper.indent-level-2 {
            margin-left: 80px;
        }

        .image-block {
            display: flex;
            /* Allows images and text to appear side by side */
            justify-content: center;
            /* Centers content horizontally */
            gap: 20px;
            /* Adds space between images */
        }

        .image-wrapper {
            text-align: center;
            /* Optional: Centers the entire block of images */
        }

        .image-item {
            display: flex;
            flex-direction: column;
            /* Makes text appear above the image */
            align-items: center;
            /* Centers the text and image horizontally */
        }

        .image-text {
            margin-bottom: 10px;
            /* Space between text and the image */
        }

        hr {
            border: 1px solid #ccc;
        }

        footer {
            text-align: center;
            margin-top: 50px;
            font-size: 0.9em;
            color: #777;
        }

        .grid-container {
            display: grid;
            grid-template-columns: auto 1fr 1fr 1fr 1fr;
            grid-template-rows: auto 1fr 1fr 1fr;
            gap: 10px;
            width: 800px;
            margin: 0 auto;
            padding-bottom: 40px;
        }

        .grid-container2 {
            display: grid;
            grid-template-columns: auto 1fr 1fr 1fr 1fr 1fr;
            grid-template-rows: auto 1fr 1fr;
            gap: 10px;
            width: 1200px;
            margin: 0 auto;
            padding-bottom: 40px;
        }

        .grid-container3 {
            display: grid;
            grid-template-columns: auto 1fr 1fr 1fr 1fr 1fr 1fr 1fr;
            grid-template-rows: auto 1fr 1fr 1fr;
            gap: 10px;
            width: 1200px;
            margin: 0 auto;
            padding-bottom: 40px;
        }

        .grid-container4 {
            display: grid;
            grid-template-columns: auto 1fr 1fr 1fr 1fr 1fr 1fr 1fr;
            grid-template-rows: auto 1fr 1fr;
            gap: 10px;
            width: 1200px;
            margin: 0 auto;
            padding-bottom: 40px;
        }

        .grid-container5 {
            display: grid;
            grid-template-columns: auto 1fr 1fr 1fr 1fr 1fr 1fr 1fr;
            grid-template-rows: auto 1fr;
            gap: 10px;
            width: 1200px;
            margin: 0 auto;
            padding-bottom: 40px;
        }

        .grid-container6 {
            display: grid;
            grid-template-columns: auto 1fr 1fr 1fr;
            grid-template-rows: auto 1fr 1fr 1fr 1fr;
            gap: 10px;
            width: 600px;
            margin: 0 auto;
            padding-bottom: 40px;
        }

        .grid-title {
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-weight: bold;
        }


        .grid-image {
            width: 100%;
            object-fit: contain;
            /* Keeps images responsive */
            /* Optional: Additional styling for pixelated images */
        }
    </style>
</head>

<body>
    <h1>CS 280A Project 5: Diffusion Models</h1>
    <h2>by Alonso Martinez</h2>
    <div class="image-wrapper indent-level-1">
        <div class="image-block">
            <img src="./media/VisAn_rot_1.gif" alt="" width=350>
        </div>
        <div class="image-block">
            <img src="./media/VisAn_rot_7.gif" alt="" width=350>
        </div>
    </div>
    <h2>Intro</h2>
    <p class='indented'> We begin our journey into neural generative models with Diffusion models. In this exciting
        project we leverage a pretrained model from DeepFloyd to generate images from inputs such as: text prompts,
        images, or pure RGB noise. Leveraging the pre-trained weights, we manually implement iterative diffusion
        denoising, Classifier-Free Guidance (CFG), and enhance the capabilities of the model via image-to-image
        translation, hole filling (inpainting), and explore how to achieve results similar to that of <a
            href="https://dangeng.github.io/visual_anagrams/" target="_blank">Visual Anagrams</a> (Geng et al., 2024)
    </p>
    <br>

    <h2>Setup</h2>
    <p class='indented'> Utilizing DeepFloyd's <b>Stage 1</b> function allows us to take the <u>text prompts</u> inputs
        and generate <u>image</u> outputs. Subsequently <b>Stage 2</b> of the model we can implement super-resolution of
        our generated images. <span style="color:grey;">(YOUR_SEED = 400)</span>
    </p>
    <br>
    <div class="image-wrapper indent-level-1">
        <div class="image-block">
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">An oil painting of a snowy mountain village</div>
                <img src="./../5/media/an_oil_painting_of_a_snowy_mountain_village_original.jpg" alt="" width="250">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">A man wearing a hat</div>
                <img src="./../5/media/a_man_wearing_a_hat_original.jpg" alt="" width="250">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">A rocket dfd</div>
                <img src="./../5/media/a_rocket_ship_original.jpg" alt="" width="250">
            </div>
        </div>
    </div>
    <br>
    <p class='indented'> We notice that the model is able to generate images that are quite close to the text prompt.
        However, these iamges were cherry-picked as the model is not perfect and can generate images that are not quite
        what we expect. We also notice a propotional initial correlation between the quality of the image and
        <code>num_inference_steps</code>.
        <br><br>
    <h2> Part 1: Sampling Loops </h2>
    <h2>1.1 - Implementing the Forward Process</h2>
    <p class='indented'> First we being by creating our own forward pass that can add noise to an image. Given we are
        using a pre-trained model from DeepFloyd, we need also need to adhere to two constraints: 1) The non-linear
        noise schedule they used to train the model (using a look up table found within <code>alphas_cumprod</code>),
        and 2) The number of discrete steps the model was trained with: 1000 steps (<code>t</code> values of 0-999)
    </p>
    <p class='indented'>
        More formally you aren't actually adding noise to the image, but rather blending between a noisy image and a
        predicted clean image. Unlike pervious projects were we blended the images like this: (A_img * selector) +
        ((1-selector) * B_img), in this case we square root the selector making the relationship not linear: (A_img *
        torch.sqrt(selector)) + ((1 - torch.sqrt(selector)) * B_img). The deviation of A and B are scaled down by the
        selector, but then added together. 'scaling' here is not referring to image size, but individual pixel values.
        Not yet quite sure why at the moment this non-linear relationship is better.
    </p>
    <br>
    <div class="image-wrapper indent-level-1">
        <div class="image-block">
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">selector 't' (blue) vs sqrt(t) (red)</div>
                <img src="./../5/media/non-linear.png" alt="" width="250">
            </div>
        </div>
    </div>
    <br>
    <p class='indented'>
        Of note ist that that the formula ∈ ~ N(0,1) does not mean that the noise generated is of range 0-1, but rather
        that the noise is of 1 standard deviation (genearally values of -4 to 4). Here are the results from the forward
        function at the corresponding values:
    </p>
    <br>
    <div class="image-wrapper indent-level-1">
        <div class="image-block">
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">original</div>
                <img src="./../5/media/berk_predict_noise_1.png" alt="" width="150" class="pixelated">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">t = 250</div>
                <img src="./../5/media/noise_250.png" alt="" width="150" class="pixelated">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">t = 500</div>
                <img src="./../5/media/noise_500.png" alt="" width="150" class="pixelated">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">t = 750</div>
                <img src="./../5/media/noise_750.png" alt="" width="150" class="pixelated">
            </div>
        </div>
    </div>
    <br><br><br>
    <h2>1.2 Classical Denoising</h2>
    <p class='indented'> Before overcomplicating things, one should always evaluate the simple solution: "Can we remove
        the noise with convolved Gaussian filers instead of Machine Learning models?" The short answer is "not well
        enough".<br><br>
        We manually tune the kernel size and sigma trying to strike the balance between getting rid of the noise while
        not losing too much detail in the original image. Here are the results:
    </p>
    <div class="image-wrapper indent-level-1">
        <div class="image-block">
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">t = 250</div>
                <img src="./../5/media/noise_250.png" alt="" width="150" class="pixelated">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">t = 500</div>
                <img src="./../5/media/noise_500.png" alt="" width="150" class="pixelated">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">t = 750</div>
                <img src="./../5/media/noise_750.png" alt="" width="150" class="pixelated">
            </div>
        </div>
    </div>
    <br>
    <p class='indented' style="text-align: center; max-width: 600px; margin: 0 auto;">
    </p>
    <div class="image-wrapper indent-level-1">
        <div class="image-block">
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">kernel_size = 9<br> sigma = 2</div>
                <img src="./../5/media/blurred_noise_250.png" alt="" width="150" class="pixelated">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">kernel_size = 11<br> sigma = 5</div>
                <img src="./../5/media/blurred_noise_500.png" alt="" width="150" class="pixelated">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">kernel_size = 13<br> sigma = 5</div>
                <img src="./../5/media/blurred_noise_750.png" alt="" width="150" class="pixelated">
            </div>
        </div>
    </div>
    <br>
    <p class='indented' style="text-align: center; max-width: 900px; margin: 0 auto;"> Now let's apply utilize we
        learned in project 2 by applying a <a href="https://alonsorobots.github.io/2" target="_blank">sharpening
            filter</a> to bring back detail by subtracting one gaussian level vs another and adding in the sharpness to
        the original image:
    </p>
    <div class="image-wrapper indent-level-1">
        <div class="image-block">
            <img src="./../5/media/sharpening_filter.jpg" alt="" width=600>
        </div>
    </div>
    <p class='indented' style="text-align: center; max-width: 600px; margin: 0 auto;"> Unfortunately the infromation has
        been lost and cannot be recovered without some digital creativity. We will explore this in the next section.
    </p>
    <br><br><br>
    <h2>1.3 Diffusion One-Step Denoising</h2>
    <p class='indented' style="text-align: center; max-width: 920px; margin: 0 auto;"> To solve this problem we can
        utilize the unreasonable effectiveness of diffusion models and large scale datasets and compute to hallucinate
        the data lost by projecting the known pixels back into the manifold of images found in the dataset. In this
        section we do <b>single shot</b> prediction of what the noise is in the image and compute how to retrieve an
        estimation of the original clean image:
    </p>
    <br>
    <div class="grid-container6">
        <!-- Top Titles -->
        <div class="grid-title"></div> <!-- Empty space for alignment -->
        <div class="grid-title">t = 250</div>
        <div class="grid-title">t = 500</div>
        <div class="grid-title">t = 750</div>

        <!-- Left Titles + Images for each row -->
        <div class="grid-title">Original image</div>
        <img src="./media/berk_predict_noise_1.png" alt="" class="grid-image pixelated">
        <img src="./media/berk_predict_noise_5.png" alt="" class="grid-image pixelated">
        <img src="./media/berk_predict_noise_9.png" alt="" class="grid-image pixelated">

        <div class="grid-title">Noised image</div>
        <img src="./media/berk_predict_noise_2.png" alt="" class="grid-image pixelated">
        <img src="./media/berk_predict_noise_6.png" alt="" class="grid-image pixelated">
        <img src="./media/berk_predict_noise_10.png" alt="" class="grid-image pixelated">

        <div class="grid-title">Predicted noise</div>
        <img src="./media/berk_predict_noise_3.png" alt="" class="grid-image pixelated">
        <img src="./media/berk_predict_noise_7.png" alt="" class="grid-image pixelated">
        <img src="./media/berk_predict_noise_11.png" alt="" class="grid-image pixelated">

        <div class="grid-title">Predicted original</div>
        <img src="./media/berk_predict_noise_4.png" alt="" class="grid-image pixelated">
        <img src="./media/berk_predict_noise_8.png" alt="" class="grid-image pixelated">
        <img src="./media/berk_predict_noise_12.png" alt="" class="grid-image pixelated">
    </div>
    <p class='indented' style="text-align: center; max-width: 900px; margin: 0 auto;"> The only downside to the <b>
            single shot denoising</b>this
        approach is that as shown in the images above, <u>The greater the noise in the image, the more
            the model struggles to predict the noise and causes blurrying in the output</u>. We will tackle this in the
        next
        section where we iteratively reduce the noise in multiple diffusion steps.
    </p>
    <br><br>
    <h2>1.4 Iterative Diffusion Denoising</h2>
    <p class='indented' style="text-align: center; max-width: 1000px; margin: 0 auto;"> Instead of the single shot
        approach of predicting noise, we break this up into itertive denoising of the image. My intuition here is that
        this architecture enduces the model to think in terms of coarse to fine detail. <br><br>

        In the section below, we compare the iterative diffusion, single shot diffusion and the simple blur approach. We
        see that the diffusion approachs are generally much better than the blur approach and further that the iterative
        diffusion approach restored additional details in the image; For example the definition in the foliage in the
        background of the image. Given that the information is actually lost, the retoration process of the iterative
        diffusion HAS to hallucinate the detail, leading to some creative interpretations of the original image.
    </p>
    <br><br>
    <div class="image-wrapper indent-level-1">
        <div class="image-block">
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">Original</div>
                <img src="./../5/media/berk_original.jpg" alt="" width="150">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">Iterative diffusion</div>
                <img src="./../5/media/berk_iter_step_32.jpg" alt="" width="150">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">One shot diffusion</div>
                <img src="./../5/media/berk_predict_noise_12.png" alt="" width="150">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">Blur denoise</div>
                <img src="./../5/media/berk_blur_filtered.jpg" alt="" width="150">
            </div>
        </div>
    </div>
    <br><br>
    <div class="image-wrapper indent-level-1">
        <div class="image-block">
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">Noisy Campanile<br> t=690</div>
                <img src="./../5/media/berk_iter_step_10.jpg" alt="" width="150" class="pixelated">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">Noisy Campanile<br> t=540</div>
                <img src="./../5/media/berk_iter_step_15.jpg" alt="" width="150" class="pixelated">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">Noisy Campanile<br> t=390</div>
                <img src="./../5/media/berk_iter_step_20.jpg" alt="" width="150" class="pixelated">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">Noisy Campanile<br> t=140</div>
                <img src="./../5/media/berk_iter_step_25.jpg" alt="" width="150" class="pixelated">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">Noisy Campanile<br> t=90</div>
                <img src="./../5/media/berk_iter_step_30.jpg" alt="" width="150" class="pixelated">
            </div>
        </div>
    </div>
    <br>
    <div class="image-wrapper indent-level-1">
        <div class="image-block">
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">Incremental diffusion denoising</div>
                <img src="./../5/media/berk_iter.gif" alt="" width="250" class="pixelated">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">+ Stage 2 Super resolution</div>
                <img src="./../5/media/berk_stage_2.jpg" alt="" width="250">
            </div>
        </div>
    </div>
    <br><br><br>
    <h2>1.5 Diffusion Model Sampling</h2>

    <p class='indented'>
        Instead of sampling from an existing image, we can hallucinate images from scratch by sampling from pure noise.

        My initial observation is that the the <u>lower the stride → the richer the image is</u>. Often a high stride
        (less iterative steps total) result
        in solid black or purple colored results. All images are enhanced used using super resolution.
    </p>
    <div class="grid-container2">
        <!-- Top Titles -->
        <div class="grid-title"></div> <!-- Empty space for alignment -->
        <div class="grid-title">Sample 1</div>
        <div class="grid-title">Sample 2</div>
        <div class="grid-title">Sample 3</div>
        <div class="grid-title">Sample 4</div>
        <div class="grid-title">Sample 5</div>

        <!-- Left Titles + Images for each row -->
        <div class="grid-title">stride = 1</div>
        <img src="./media/random_10_hires.jpg" alt="" class="grid-image">
        <img src="./media/random_9_hires.jpg" alt="" class="grid-image">
        <img src="./media/random_7_hires.jpg" alt="" class="grid-image">
        <img src="./media/random_12_hires.jpg" alt="" class="grid-image">
        <img src="./media/random_17_hires.jpg" alt="" class="grid-image">


        <div class="grid-title">stride = 30</div>
        <img src="./media/random_lowiter2_0_hires.jpg" alt="" class="grid-image">
        <img src="./media/random_lowiter_2_hires.jpg" alt="" class="grid-image">
        <img src="./media/random_lowiter_3_hires.jpg" alt="" class="grid-image">
        <img src="./media/random_lowiter2_16_hires.jpg" alt="" class="grid-image">
        <img src="./media/random_lowiter2_5_hires.jpg" alt="" class="grid-image">

    </div>
    <br><br>
    <h2>1.6 Classifier-Free Guidance (CFG)</h2>
    <p class='indented'>
        We enhance the controlability of our generative model via the technique of <a
            href="https://arxiv.org/abs/2207.12598" target="_blank">Classifier-Free Guidance (CFG)</a>, which in a way
        gives us a control knob to adjust the influence of the text prompt on the generated image. <br><br> Given that
        our model has the capability to "see" which part of noise looks like a <u>given text prompt</u>, we can compute
        the delta between a <b>user given text</b> prompt and an <b>empty text prompt</b>, scale that delta by the
        <code>cfg-scale</code>, then add it to the unconditional noise. <br><br>

        The truly <b>exciting concept</b> ⭐ is that you can extrapolate outside of the manifold of images in the
        original dataset
        by choosing a <code>CFG</code> values higher than 1! Here you can see that CFG = 7 is literally giving you
        other-worldy results: (I guess this alternate world is very purple) 😊
    </p>
    <br>
    <div class="grid-container2">
        <!-- Top Titles -->
        <div class="grid-title"></div> <!-- Empty space for alignment -->
        <div class="grid-title">Sample 1</div>
        <div class="grid-title">Sample 2</div>
        <div class="grid-title">Sample 3</div>
        <div class="grid-title">Sample 4</div>
        <div class="grid-title">Sample 5</div>

        <!-- Left Titles + Images for each row -->
        <div class="grid-title">CFG = 2</div>
        <img src="./media/random_CFG2_7_hires.jpg" alt="" class="grid-image">
        <img src="./media/random_CFG2_5_hires.jpg" alt="" class="grid-image">
        <img src="./media/random_CFG2_2_hires.jpg" alt="" class="grid-image">
        <img src="./media/random_CFG2_3_hires.jpg" alt="" class="grid-image">
        <img src="./media/random_CFG2_4_hires.jpg" alt="" class="grid-image">


        <div class="grid-title">CFG = 7</div>
        <img src="./media/random_CFG_0_hires.jpg" alt="" class="grid-image">
        <img src="./media/random_CFG_8_hires.jpg" alt="" class="grid-image">
        <img src="./media/random_CFG_2_hires.jpg" alt="" class="grid-image">
        <img src="./media/random_CFG_5_hires.jpg" alt="" class="grid-image">
        <img src="./media/random_CFG_16_hires.jpg" alt="" class="grid-image">

    </div>
    <h2> 1.7 Image-to-image Translation </h2>
    <p class=indent>
        Now that we know how to project images and noise into the manifold of known images, let's <b>explore the
            manifold</b> ⭐ a
        bit more. A simple and philosophically intersting question we can ask is: <b>What are some things that the model
            thinks is visually similar to my input image?</b>.<br><br>

        More technically, we project our input image into the manifold and explore the area around it via two variables:
        1) <u>Controlling the initial amount of noise</u> in the input image via <b>i_start</b> and
        2) <u>The number of incremental diffusion steps</u> (which allow it to walk further away from the original
        noise).<br><br>

        The images below how the model hallucinates images that are visually similar to the input image. In practice we
        see that the lower the <code>i_start</code> and <code>stride</code>, the furhter away we are to a visual
        similary to the input image. What is non the less beautiful to see what visual associations the model has with
        the input image.
    </p>
    <br>
    <div class="grid-container3">
        <!-- Top Titles -->
        <div class="grid-title"></div> <!-- Empty space for alignment -->
        <div class="grid-title">i_start 1</div>
        <div class="grid-title">i_start 3</div>
        <div class="grid-title">i_start 4</div>
        <div class="grid-title">i_start 7</div>
        <div class="grid-title">i_start 10</div>
        <div class="grid-title">i_start 20</div>
        <div class="grid-title">original</div>

        <!-- Left Titles + Images for each row -->
        <div class="grid-title">stride = 30</div>
        <img src="./media/im2im_1.jpg" alt="" class="grid-image">
        <img src="./media/im2im_3.jpg" alt="" class="grid-image">
        <img src="./media/im2im_5.jpg" alt="" class="grid-image">
        <img src="./media/im2im_7.jpg" alt="" class="grid-image">
        <img src="./media/im2im_10.jpg" alt="" class="grid-image">
        <img src="./media/im2im_20.jpg" alt="" class="grid-image">
        <img src="./media/campanile_original.jpg" alt="" class="grid-image">

        <div class="grid-title">stride = 15</div>
        <img src="./media/im2im3_1.jpg" alt="" class="grid-image">
        <img src="./media/im2im3_3.jpg" alt="" class="grid-image">
        <img src="./media/im2im3_5.jpg" alt="" class="grid-image">
        <img src="./media/im2im3_7.jpg" alt="" class="grid-image">
        <img src="./media/im2im3_10.jpg" alt="" class="grid-image">
        <img src="./media/im2im3_20.jpg" alt="" class="grid-image">
        <img src="./media/campanile_original.jpg" alt="" class="grid-image">

        <div class="grid-title">stride = 7</div>
        <img src="./media/im2im4_1.jpg" alt="" class="grid-image">
        <img src="./media/im2im4_3.jpg" alt="" class="grid-image">
        <img src="./media/im2im4_5.jpg" alt="" class="grid-image">
        <img src="./media/im2im4_7.jpg" alt="" class="grid-image">
        <img src="./media/im2im4_10.jpg" alt="" class="grid-image">
        <img src="./media/im2im4_20.jpg" alt="" class="grid-image">
        <img src="./media/campanile_original.jpg" alt="" class="grid-image">

        <div class="grid-title">stride = 1</div>
        <img src="./media/im2im2_1.jpg" alt="" class="grid-image">
        <img src="./media/im2im2_3.jpg" alt="" class="grid-image">
        <img src="./media/im2im2_5.jpg" alt="" class="grid-image">
        <img src="./media/im2im2_7.jpg" alt="" class="grid-image">
        <img src="./media/im2im2_10.jpg" alt="" class="grid-image">
        <img src="./media/im2im2_20.jpg" alt="" class="grid-image">
        <img src="./media/campanile_original.jpg" alt="" class="grid-image">
    </div>
    <br>
    <h3>Additional input images</h3>
    <p class='indented2'> Let's see more results with some additional input images. (The stride was kept at 30 for all
        images)

    </p>
    <div class="grid-container3">
        <!-- Top Titles -->
        <div class="grid-title"></div> <!-- Empty space for alignment -->
        <div class="grid-title">i_start 1</div>
        <div class="grid-title">i_start 3</div>
        <div class="grid-title">i_start 4</div>
        <div class="grid-title">i_start 7</div>
        <div class="grid-title">i_start 10</div>
        <div class="grid-title">i_start 20</div>
        <div class="grid-title">original</div>

        <!-- Left Titles + Images for each row -->
        <div class="grid-title">stride = 30</div>
        <img src="./media/im2im_photo_1_1.jpg" alt="" class="grid-image">
        <img src="./media/im2im_photo_1_3.jpg" alt="" class="grid-image">
        <img src="./media/im2im_photo_1_5.jpg" alt="" class="grid-image">
        <img src="./media/im2im_photo_1_7.jpg" alt="" class="grid-image">
        <img src="./media/im2im_photo_1_10.jpg" alt="" class="grid-image">
        <img src="./media/im2im_photo_1_20.jpg" alt="" class="grid-image">
        <img src="./media/photo_1_original.jpg" alt="" class="grid-image">

        <div class="grid-title">stride = 30</div>
        <img src="./media/im2im_photo_4_1.jpg" alt="" class="grid-image">
        <img src="./media/im2im_photo_4_3.jpg" alt="" class="grid-image">
        <img src="./media/im2im_photo_4_5.jpg" alt="" class="grid-image">
        <img src="./media/im2im_photo_4_7.jpg" alt="" class="grid-image">
        <img src="./media/im2im_photo_4_10.jpg" alt="" class="grid-image">
        <img src="./media/im2im_photo_4_20.jpg" alt="" class="grid-image">
        <img src="./media/photo_4_original.jpg" alt="" class="grid-image">

        <div class="grid-title">stride = 30</div>
        <img src="./media/im2im_photo_6_1.jpg" alt="" class="grid-image">
        <img src="./media/im2im_photo_6_3.jpg" alt="" class="grid-image">
        <img src="./media/im2im_photo_6_5.jpg" alt="" class="grid-image">
        <img src="./media/im2im_photo_6_7.jpg" alt="" class="grid-image">
        <img src="./media/im2im_photo_6_10.jpg" alt="" class="grid-image">
        <img src="./media/im2im_photo_6_20.jpg" alt="" class="grid-image">
        <img src="./media/photo_6_original.jpg" alt="" class="grid-image">

        <div class="grid-title">stride = 30</div>
        <img src="./media/im2im_photo_7_1.jpg" alt="" class="grid-image">
        <img src="./media/im2im_photo_7_3.jpg" alt="" class="grid-image">
        <img src="./media/im2im_photo_7_5.jpg" alt="" class="grid-image">
        <img src="./media/im2im_photo_7_7.jpg" alt="" class="grid-image">
        <img src="./media/im2im_photo_7_10.jpg" alt="" class="grid-image">
        <img src="./media/im2im_photo_7_20.jpg" alt="" class="grid-image">
        <img src="./media/photo_7_original.jpg" alt="" class="grid-image">
    </div>
    <br><br>
    <h2>1.7.1 Editing Hand-Drawn and Web Images</h2>
    <h3>Web Images</h3>

    <p class=indented2> Another fantastic application we can explore is how to interpolate between two concepts such as
        "realistic" to "cartoony". We achieve this by using the text prompt <code>"a high quality photo"</code> (which
        implies a certain degree if realism) and then using a strong <code>CFG</code> value.
    </p>
    <div class="grid-container4">
        <!-- Top Titles -->
        <div class="grid-title"></div> <!-- Empty space for alignment -->
        <div class="grid-title">i_start 1</div>
        <div class="grid-title">i_start 3</div>
        <div class="grid-title">i_start 4</div>
        <div class="grid-title">i_start 7</div>
        <div class="grid-title">i_start 10</div>
        <div class="grid-title">i_start 20</div>
        <div class="grid-title">original</div>

        <!-- Left Titles + Images for each row -->
        <div class="grid-title">stride = 30</div>
        <img src="./media/im2im_drawing_1_1.jpg" alt="" class="grid-image">
        <img src="./media/im2im_drawing_1_3.jpg" alt="" class="grid-image">
        <img src="./media/im2im_drawing_1_5.jpg" alt="" class="grid-image">
        <img src="./media/im2im_drawing_1_7.jpg" alt="" class="grid-image">
        <img src="./media/im2im_drawing_1_10.jpg" alt="" class="grid-image">
        <img src="./media/im2im_drawing_1_20.jpg" alt="" class="grid-image">
        <img src="./media/drawing_1.jpg" alt="" class="grid-image">

        <div class="grid-title">stride = 30</div>
        <img src="./media/im2im_drawing_2_1.jpg" alt="" class="grid-image">
        <img src="./media/im2im_drawing_2_3.jpg" alt="" class="grid-image">
        <img src="./media/im2im_drawing_2_5.jpg" alt="" class="grid-image">
        <img src="./media/im2im_drawing_2_7.jpg" alt="" class="grid-image">
        <img src="./media/im2im_drawing_2_10.jpg" alt="" class="grid-image">
        <img src="./media/im2im_drawing_2_20.jpg" alt="" class="grid-image">
        <img src="./media/drawing_2.jpg" alt="" class="grid-image">
    </div>
    <p class="indented2"> We see an incredible result! In the first row, between the <code>i_start</code> values of 4
        and 10 we see
        that the model arrived at a very similar generalization of the 'realism / cartoony' axis as seen in the book by
        Scott McCloud, <a href="https://en.wikipedia.org/wiki/Understanding_Comics" target="_blank">"Understanding
            Comics"</a>. </p>
    </p>
    <div class="image-wrapper indent-level-1">
        <div class="image-block">
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">Incremental diffusion denoising</div>
                <img src="./../5/media/ScottMcloud.png" alt="" width="800">
            </div>
        </div>
    </div>
    <br><br>
    <h3>Hand drawn</h3>
    <p class="indented2"> Some additional inputs from hand drawn images. You can see that for the first result it
        struggles to project
        this imaginary creature into the manifold of known images. The second image is a bit more successful.
    </p>
    <div class="grid-container4">
        <!-- Top Titles -->
        <div class="grid-title"></div> <!-- Empty space for alignment -->
        <div class="grid-title">i_start 1</div>
        <div class="grid-title">i_start 3</div>
        <div class="grid-title">i_start 4</div>
        <div class="grid-title">i_start 7</div>
        <div class="grid-title">i_start 10</div>
        <div class="grid-title">i_start 20</div>
        <div class="grid-title">original</div>

        <div class="grid-title">stride = 30</div>
        <img src="./media/im2im_drawing_3_1.jpg" alt="" class="grid-image">
        <img src="./media/im2im_drawing_3_3.jpg" alt="" class="grid-image">
        <img src="./media/im2im_drawing_3_5.jpg" alt="" class="grid-image">
        <img src="./media/im2im_drawing_3_7.jpg" alt="" class="grid-image">
        <img src="./media/im2im_drawing_3_10.jpg" alt="" class="grid-image">
        <img src="./media/im2im_drawing_3_20.jpg" alt="" class="grid-image">
        <img src="./media/drawing_3.jpg" alt="" class="grid-image">

        <div class="grid-title">stride = 30</div>
        <img src="./media/im2im_drawing_5_1.jpg" alt="" class="grid-image">
        <img src="./media/im2im_drawing_5_3.jpg" alt="" class="grid-image">
        <img src="./media/im2im_drawing_5_5.jpg" alt="" class="grid-image">
        <img src="./media/im2im_drawing_5_7.jpg" alt="" class="grid-image">
        <img src="./media/im2im_drawing_5_10.jpg" alt="" class="grid-image">
        <img src="./media/im2im_drawing_5_20.jpg" alt="" class="grid-image">
        <img src="./media/drawing_5.jpg" alt="" class="grid-image">
    </div>
    <br><br>
    <h3>Stroke based editing</h3>
    <p class="indented2"> Using an input image as control, you can make some super rough visual edits to the image and
        hallucinate variations. In the first example we add a moon to the image and in the second example we add a
        river.
    </p>
    <div class="image-wrapper indent-level-1">
        <div class="image-block">
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">Original</div>
                <img src="./../5/media/pic_2_1.jpg" alt="" width="200">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">Added stroke drawn moon</div>
                <img src="./../5/media/pic_2_2.jpg" alt="" width="200">
            </div>
        </div>
    </div>
    <br><br>
    <div class="image-wrapper indent-level-1">
        <div class="image-block">
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">i_start 1</div>
                <img src="./../5/media/im2im_drawing2_2_1.jpg" alt="" width="200">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">i_start 3</div>
                <img src="./../5/media/im2im_drawing2_2_3.jpg" alt="" width="200">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">i_start 4</div>
                <img src="./../5/media/im2im_drawing2_2_5.jpg" alt="" width="200">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">i_start 7</div>
                <img src="./../5/media/im2im_drawing2_2_7.jpg" alt="" width="200">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">i_start 11n</div>
                <img src="./../5/media/im2im_drawing2_2_10.jpg" alt="" width="200">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">i_start 20</div>
                <img src="./../5/media/im2im_drawing2_2_20.jpg" alt="" width="200">
            </div>
        </div>
    </div>
    <br>
    <div class="image-wrapper indent-level-1">
        <div class="image-block">
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;"><br>Original</div>
                <img src="./../5/media/pic_1_1.jpg" alt="" width="200">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">Added stroke drawn<br>river and bushes</div>
                <img src="./../5/media/pic_1_2.jpg" alt="" width="200">
            </div>
        </div>
    </div>
    <br><br>
    <div class="image-wrapper indent-level-1">
        <div class="image-block">
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">i_start 1</div>
                <img src="./../5/media/im2im_drawing2_1_1.jpg" alt="" width="200">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">i_start 3</div>
                <img src="./../5/media/im2im_drawing2_1_3.jpg" alt="" width="200">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">i_start 4</div>
                <img src="./../5/media/im2im_drawing2_1_5.jpg" alt="" width="200">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">i_start 7</div>
                <img src="./../5/media/im2im_drawing2_1_7.jpg" alt="" width="200">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">i_start 11n</div>
                <img src="./../5/media/im2im_drawing2_1_10.jpg" alt="" width="200">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">i_start 20</div>
                <img src="./../5/media/im2im_drawing2_1_20.jpg" alt="" width="200">
            </div>
        </div>
    </div>
    <br><br><br>
    <h2> 1.7.2 Inpainting </h2>

    <p class=indent>
        An emergent capability of this architecture is "hole filling" masks in images, known as <b>inpainting</b>.
        This is achieved by replacing the masked part of the pixels with the original image at each step of the
        diffusion. This forces the system to use the context of the original photo and inegrate it into the hallucinated
        parts.
    </p>
    <br>
    <div class="image-wrapper indent-level-1">
        <div class="image-block">
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">Original</div>
                <img src="./../5/media/blend_4_1.jpg" alt="" width="250">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">Mask</div>
                <img src="./../5/media/inpaint_4_mask.jpg" alt="" width="250">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">Applied Mask</div>
                <img src="./../5/media/inpaint_4_maskapp.jpg" alt="" width="250">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">Inpainted</div>
                <img src="./../5/media/inpaint_5_4.gif" alt="" width="250" class="pixelated">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">Inpainted hiRes</div>
                <img src="./../5/media/inpaint5_4_hi.jpg" alt="" width="250">
            </div>
        </div>
    </div>
    <br><br>
    <h3> Applying to hybrid images</h3>
    <p class="indented2">
        I was naturally curious how the inpaniting woudl work on the texture hybrid images from <a
            href="https://alonsorobots.github.io/2/">project 2</a>. I think most of the images are an improvement! 😊
    </p>
    <br>
    <div class="image-wrapper indent-level-1">
        <div class="image-block">
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">Hybrid Original</div>
                <img src="./../5/media/blend_1_1.jpg" alt="" width="150">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">Mask</div>
                <img src="./../5/media/blend_1_2.jpg" alt="" width="150">
            </div>

            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">Inpainted</div>
                <img src="./../5/media/inpaint_4_1.gif" alt="" width="150" class="pixelated">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">Inpainted hiRes</div>
                <img src="./../5/media/inpaint4_1_hi.jpg" alt="" width="150">
            </div>
        </div>
    </div>
    <div class="image-wrapper indent-level-1">
        <div class="image-block">
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;"></div>
                <img src="./../5/media/blend_2_1.jpg" alt="" width="150">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;"></div>
                <img src="./../5/media/blend_2_2.jpg" alt="" width="150">
            </div>

            <div class="image-item">
                <div class="image-text" style="font-weight: bold;"></div>
                <img src="./../5/media/inpaint_1_2.gif" alt="" width="150" class="pixelated">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;"></div>
                <img src="./../5/media/inpaint1_2_hi.jpg" alt="" width="150">
            </div>
        </div>
    </div>
    <div class="image-wrapper indent-level-1">
        <div class="image-block">
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;"></div>
                <img src="./../5/media/blend_3_1.jpg" alt="" width="150">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;"></div>
                <img src="./../5/media/blend_3_2.jpg" alt="" width="150">
            </div>

            <div class="image-item">
                <div class="image-text" style="font-weight: bold;"></div>
                <img src="./../5/media/inpaint_1_3.gif" alt="" width="150" class="pixelated">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;"></div>
                <img src="./../5/media/inpaint1_3_hi.jpg" alt="" width="150">
            </div>
        </div>
    </div>
    <br><br> <br>
    <h2> 1.7.3 Text-Conditional Image-to-image Translation
    </h2>
    <p class="indented">
        The other critical degree of <u>controlability</u> for this generative video language model is the 'languge'
        itself
        via the <b>text promps</b>. We can see that we can interploate between to locations in the manifold, one given
        by an input image and the other given by a text prompt. One easy way to understand what is happening in the
        images below is to think that when the amount of noise on the original image is high, it can get closer to the
        location of the text prompt, and the less noise the more it has to stick to what it already has (since it can't
        dramatically alter the image.)
    </p>
    <br>
    <p class="indented2" style="text-align: center;">
        <b>Interpolation between the text prompt: "a pencil" and an image of a the Capmanile at UC Berkeley.</b>
    </p>
    <br>
    <div class="image-wrapper indent-level-1">
        <div class="image-block">
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">i_start 1</div>
                <img src="./../5/media/txtCond2_1_6.jpg" alt="" width="256">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">i_start 3</div>
                <img src="./../5/media/txtCond2_3_5.jpg" alt="" width="256">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">i_start 4</div>
                <img src="./../5/media/txtCond2_5_5.jpg" alt="" width="256" class="pixelated">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">i_start 7</div>
                <img src="./../5/media/txtCond2_7_3.jpg" alt="" width="256">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">i_start 10</div>
                <img src="./../5/media/txtCond2_10_1.jpg" alt="" width="256">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">i_start 20</div>
                <img src="./../5/media/txtCond2_20_2.jpg" alt="" width="256">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">Original</div>
                <img src="./../5/media/campanile_original.jpg" alt="" width="256">
            </div>
        </div>
    </div>
    <br><br>

    <p class="indented2" style="text-align: center;">
        <b>Interpolation between the text prompt: "a dog" and an image of rocks.</b>
    </p>
    <div class="image-wrapper indent-level-1">
        <div class="image-block">
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">i_start 1</div>
                <img src="./../5/media/txtCon_Dog_1_1.jpg" alt="" width="256">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">i_start 3</div>
                <img src="./../5/media/txtCon_Dog_3_6.jpg" alt="" width="256">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">i_start 4</div>
                <img src="./../5/media/txtCon_Dog_5_2.jpg" alt="" width="256" class="pixelated">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">i_start 7</div>
                <img src="./../5/media/txtCon_Dog_7_6.jpg" alt="" width="256">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">i_start 10</div>
                <img src="./../5/media/txtCon_Dog_10_3.jpg" alt="" width="256">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">i_start 20</div>
                <img src="./../5/media/txtCon_Dog_20_1.jpg" alt="" width="256">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">Original</div>
                <img src="./../5/media/textCond_6.jpg" alt="" width="256">
            </div>
        </div>
    </div>
    <br><br>
    <p class="indented2" style="text-align: center;">
        <b>Interpolation between the text prompt: "a dog" and an image of cat.</b>
    </p>
    <div class="image-wrapper indent-level-1">
        <div class="image-block">
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">i_start 1</div>
                <img src="./../5/media/txtCon_Dog2_1_6.jpg" alt="" width="256">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">i_start 3</div>
                <img src="./../5/media/txtCon_Dog2_3_6.jpg" alt="" width="256">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">i_start 4</div>
                <img src="./../5/media/txtCon_Dog2_5_2.jpg" alt="" width="256" class="pixelated">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">i_start 7</div>
                <img src="./../5/media/txtCon_Dog2_10_1.jpg" alt="" width="256">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">i_start 10</div>
                <img src="./../5/media/txtCon_Dog2_7_6.jpg" alt="" width="256">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">i_start 20</div>
                <img src="./../5/media/txtCon_Dog2_20_2.jpg" alt="" width="256">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">Original</div>
                <img src="./../5/media/textCond_1.jpg" alt="" width="256">
            </div>
        </div>
    </div>
    <br><br>
    <h2> 1.8 Visual Anagrams</h2>
    <p class="indented">
        Similar to Mexican artist Octavio Ocampo's remarkable surrealist paintings from the 1970s, which reveal
        different images depending on the viewer's perspective, we will use our diffusion generative model to create
        dual-meaning illustrations. To achieve this, we will implement techniques from the <a
            href="https://dangeng.github.io/visual_anagrams/" target="_blank">Visual Anagrams</a> paper (Geng
        et al., 2024).
    </p>
    <div class="image-wrapper indent-level-1">
        <div class="image-block" style="gap: 80px;">
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">"General’s Family"</div>
                <img src="./../5/media/Octavio1.jpg" alt="" width="310">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">"Visions of Quixote"</div>
                <img src="./../5/media/Octavio3.jpg" alt="" width="350">
            </div>
        </div>
    </div>
    <h3> Rotating Anagrams</h3>
    <p class="indented2">
        In order to achieve this illusion of dual meaning, during each iteration of the diffusion process, we follow the
        following steps:
    </p>
    <ol class="indented2">
        <li>Make two copies of the current noisy image (orig_noise_A, orig_noise_B)</li>
        <li>Nudge orig_noise_A towards "text prompt A"</li>
        <li>Rotate orig_noise_B by 180 degrees</li>
        <li>Average orig_noise_A and orig_noise_B</li>
    </ol>
    <p class="indented2">
        This surprisngly simple techniques yield some incredibly creative and striking!
    </p>
    <p class="indented2" style="text-align: center;">
        <b>"an oil painting of an old man" </b> &rarr; <b>"an oil painting of people around a campfire"</b>
    </p>
    <div class="image-wrapper indent-level-1">
        <div class="image-block">
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;"></div>
                <img src="./../5/media/VisAn_rot_1.gif" alt="" width="400">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;"></div>
                <img src="./../5/media/VisAn_rot_2.gif" alt="" width="400">
            </div>
        </div>
    </div>
    <div class="image-wrapper indent-level-1">
        <div class="image-block">
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;"></div>
                <img src="./../5/media/VisAn_rot_3.gif" alt="" width="400">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;"></div>
                <img src="./../5/media/VisAn_rot_4.gif" alt="" width="400">
            </div>
        </div>
    </div>
    <br>
    <p class="indented2" style="text-align: center;">
        <b>"an oil painting of an old man" </b> &rarr; <b>"an oil painting of a snowy mountain village"</b>
    </p>
    <div class="image-wrapper indent-level-1">
        <div class="image-block">
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;"></div>
                <img src="./../5/media/VisAn_rot_5.gif" alt="" width="400">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;"></div>
                <img src="./../5/media/VisAn_rot_6.gif" alt="" width="400">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;"></div>
                <img src="./../5/media/VisAn_rot_7.gif" alt="" width="400">
            </div>
        </div>
    </div>
    <br><br>
    <h2> 1.9 Hybrid Images</h2>
    <h3> Low / High frequency Anagrams</h3>
    <p class="indented2" style="text-align: center;">
        The first text prompt descriptions correspond with the large image, and second prompt corresponds with the small
        image.
    </p>
    <div class="image-wrapper indent-level-1">
        <div class="image-block">
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">"lithograph of a forest"<br>"lithograph of a penguin"
                </div>
                <img src="./../5/media/VisAn_zoom_1.gif" alt="" width="400">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">"lithograph of a waterfall"<br>"lithograph of a
                    panda"</div>
                <img src="./../5/media/VisAn_zoom_2.gif" alt="" width="400">
            </div>
            <div class="image-item">
                <div class="image-text" style="font-weight: bold;">"lithograph of a waterfall"<br>"lithograph of a
                    skull"</div>
                <img src="./../5/media/VisAn_zoom_3.gif" alt="" width="400">
            </div>
        </div>
    </div>






    <h2>Part 2 - Bells and Whistles (WIP section)</h2>
    <ul class="indented">
        <li> Used super resolution</li>
        <li> Animated diffusion steps for gifs</li>
        <li> Animated gifs to better communicate results</li>
        <li> Did logo for class (WIP) </li>
        <li> I did more examples for outputs like 1.7, 1.8, 1.9</li>
    </ul>


    <h2>Final thoughts (Super WIP) </h2>
    <p class=indent>
        I particularly enjoyed feeding the model noise and seeing it hallucinate images. This makes me think of "Do
        Androids Dream of Electric Sheep?" by Philip K.<br><br>

        Talk about issues around dataset bias towards female gender.
    </p>
    <footer>
        CS 280A - Intro to Computer Vision | Alonso Martinez
    </footer>
    <script>
        function setLabelsAndSize(containerId) {
            const container = document.getElementById(containerId);
            const leftLabel = document.getElementById('leftLabel');
            const rightLabel = document.getElementById('rightLabel');
            const imgA = document.getElementById('imgA');
            const imgB = document.getElementById('imgB');

            // Get the titles from the data attributes
            const leftTitle = container.getAttribute('data-left-title');
            const rightTitle = container.getAttribute('data-right-title');

            // Update the labels
            leftLabel.textContent = leftTitle;
            rightLabel.textContent = rightTitle;

            // Get width and height from data attributes
            let width = container.getAttribute('data-width');
            let height = container.getAttribute('data-height');

            // Get the original aspect ratio from the first image
            const aspectRatio = imgA.naturalWidth / imgA.naturalHeight;

            // If only width is provided, calculate the height based on the aspect ratio
            if (width && !height) {
                height = width / aspectRatio;
            }

            // If only height is provided, calculate the width based on the aspect ratio
            if (!width && height) {
                width = height * aspectRatio;
            }

            // Apply the width and height to the container
            container.style.width = `${width}px`;
            container.style.height = `${height}px`;
        }

        // Call the function to set custom titles and sizes
        window.onload = function () {
            setLabelsAndSize('comparisonContainer');
        };

        // Add mousemove functionality for the comparison
        const comparisonContainer = document.getElementById('comparisonContainer');
        const divider = document.getElementById('divider');
        const imgTop = document.querySelector('.img-top');

        comparisonContainer.addEventListener('mousemove', (event) => {
            // Get the position of the mouse relative to the container
            const rect = comparisonContainer.getBoundingClientRect();
            const x = event.clientX - rect.left; // x position of the mouse inside the container

            // Set the position of the divider
            divider.style.left = x + 'px';

            // Clip the top image to create the A/B effect
            imgTop.style.clip = `rect(0, ${x}px, 400px, 0)`;
        });

        comparisonContainer.addEventListener('mouseleave', () => {
            // Reset the divider to the middle when the mouse leaves the container
            const middle = comparisonContainer.offsetWidth / 2;
            divider.style.left = middle + 'px';
            imgTop.style.clip = `rect(0, ${middle}px, 400px, 0)`;
        });
    </script>

</body>

</html>